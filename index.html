<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Meter Search</title>
</head>
<body style="display: block;text-align: center;margin: 0 auto;width: 100%;font-size: 25px;font-weight: bold;">

<h3>ਇੱਥੇ ਸੀਰਿਲ ਨੰਬਰ ਭਰਦੇ</h3>

<input type="text" id="search" placeholder="Enter Meter Serial Number">
<button onclick="search()">Search</button>

<pre id="result"></pre>


<script>
let data = [];

fetch("data.csv")
  .then(res => res.text())
  .then(text => {
    let rows = text.trim().split("\n").slice(1);

    rows.forEach(r => {
      let c = r.split(",").map(x => x.replace(/"/g, "").trim());
      if (c.length >= 5) {
        data.push({
          acct: c[0],        // ACCTID
          legacy: c[1],      // LEGACYACCTID
          name: c[2],        // NAME
          address: c[3],     // ADDRESS
          meter: c[4]        // MTR_SER_NO ✅
        });
      }
    });

    console.log("Rows loaded:", data.length);
  });

function search() {
  let val = document.getElementById("search").value.trim();
  let out = document.getElementById("result");

  let found = data.find(d => d.meter == val);

  if (found) {
    out.textContent =
      "Account ID: " + found.acct + "\n" +
      "Legacy Account: " + found.legacy + "\n" +
      "Name: " + found.name + "\n" +
      "Address: " + found.address;
  } else {
    out.textContent = "❌ ਹੈ ਨੀ ਭਰਾਵਾ ਕੁਝ ਜਾ ਕੇ ਡਵੀਜ਼ਨ ਚੋਂ ਬਣਵਾਲਾ ਬਿੱਲ ਇਹਦਾ";
  }
}
</script>



</body>
</html>
